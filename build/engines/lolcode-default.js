(function(){this.LOLCoffee={KEYWORDS:"IF U SAY SO,IM OUTTA YR,QUOSHUNT OF,PRODUKT OF,BOTH SAEM,EITHER OF,HOW DUZ I,SMALLR OF,BIGGR OF,CHARZ OF,DIFFRINT,FOUND YR,IM IN YR,IS NOW A,LENGZ OF,BOTH OF,DIFF OF,I HAS A,KTHXBYE,ORDZ OF,VISIBLE,ALL OF,ANY OF,BUKKIT,GIMMEH,MOD OF,NERFIN,NUMBAR,NO WAI,O RLY?,OMGWTF,SMOOSH,SUM OF,WON OF,YA RLY,MEBBE,NUMBR,TROOF,UPPIN,FAIL,GTFO,INTA,MAEK,MKAY,NOOB,PUTZ,WILE,WTF?,YARN,HAI,ITZ,NOT,OIC,OMG,TIL,WIN,AN,AT,YR,!,A,R".split(","),UNARY_OPERATORS:["NOT","LENGZ OF","CHARZ OF",
"ORDZ OF"],BINARY_OPERATORS:"SUM OF,DIFF OF,PRODUKT OF,QUOSHUNT OF,MOD OF,BIGGR OF,SMALLR OF,BOTH OF,EITHER OF,WON OF,BOTH SAEM,DIFFRINT".split(","),INFINITARY_OPERATORS:["ALL OF","ANY OF","SMOOSH"],DEFAULT_VALUES:{YARN:"",NUMBR:0,NUMBAR:0,TROOF:false,NOOB:null}}}).call(this);
(function(){var e,v,k,w,u,n,s,t,r,i,a,d,h,p,x,E,o,A,f,B,z,F,C,l,G,H,I,q,J,K,L,M,N,O,P,Q,R,j,m,b,c,S,T,U,V,W,X,Y,Z,$={}.hasOwnProperty,y=function(a,g){function c(){this.constructor=a}for(var b in g)$.call(g,b)&&(a[b]=g[b]);c.prototype=g.prototype;a.prototype=new c;a.__super__=g.prototype;return a};a=this.LOLCoffee.DEFAULT_VALUES;l=function(a){function g(g){this.message=g+"."}y(g,a);g.prototype.name="MachineError";return g}(Error);j=function(){function c(g,a){this.type=g;this.value=a}c.prototype.equal=
function(g){var a,c;return((a=this.type)==="float"||a==="int")&&((c=g.type)==="float"||c==="int")?this.value===g.value:this.type===g.type?this.value===g.value:false};c.prototype.cast=function(g,b){var D;b==null&&(b=false);if(g==="null")throw new l("Cannot cast to NOOB");D=null;switch(this.type){case "null":if(b){if(!(g in a))throw new l("Unknown type: "+g);D=a[g]}else{if(g!=="bool")throw new l("Cannot implicitly cast NOOB to "+g);D=false}break;case "bool":D=function(){switch(g){case "bool":return this.value;
case "int":case "float":return Number(this.value);case "string":return this.value?"WIN":"FAIL";default:throw new l("Unknown type: "+g);}}.call(this);break;case "int":D=function(){switch(g){case "bool":return this.value!==0;case "int":case "float":return this.value;case "string":return String(this.value);default:throw new l("Unknown type: "+g);}}.call(this);break;case "float":D=function(){switch(g){case "bool":return this.value!==0;case "int":return Math.floor(this.value);case "float":return this.value;
case "string":return String(this.value);default:throw new l("Unknown type: "+g);}}.call(this);break;case "string":D=function(){switch(g){case "bool":return this.value!=="";case "int":if(!/^-?\d+$/.test(this.value))throw new l("Cannot parse NUMBR from '"+this.value+"'");return parseInt(this.value,10);case "float":if(!/^-?(\d+(\.\d*)?|\.\d+)$/.test(this.value))throw new l("Cannot parse NUMBAR from '"+this.value+"'");return parseFloat(this.value);case "string":return this.value;default:throw new l("Unknown type: "+
g);}}.call(this);break;default:throw new l("Unknown type: "+this.type);}return new c(g,D)};return c}();x=function(){return function(a,g){this.name=a;this.instruction_ptr=g;this.variables={};this.stack=[]}}();f=function(){function a(){}a.prototype.exec=function(g){g.halted=true;return g.done()};return a}();F=function(){function a(g){this.label=g}a.prototype.exec=function(g){return g.instruction_ptr=g.labels[this.label]};return a}();C=function(){function a(g){this.label=g}a.prototype.exec=function(g){if(g.getStack().pop().value===
false)return g.instruction_ptr=g.labels[this.label]};return a}();d=function(){function a(g,c){this.name=g;this.label=c}a.prototype.exec=function(g){return g.functions[this.name]=g.labels[this.label]};return a}();h=function(){function a(g){this.identifier=g}a.prototype.exec=function(g){if(this.identifier==="IT")throw new l("Cannot declare the special variable IT");return g.frames.slice(-1)[0].variables[this.identifier]=new j("null",null)};return a}();u=function(){function a(g){this.identifier=g}a.prototype.exec=
function(g){var a,c,b;a=g.frames[0].variables;c=g.frames.slice(-1)[0].variables;b=g.getStack().pop();if(this.identifier in c)return c[this.identifier]=b;else if(this.identifier in a)return a[this.identifier]=b;else if(g.auto_declare)return c[this.identifier]=b;else throw new l("Assignment to undefined variable: "+this.identifier);};return a}();n=function(){function a(g){this.identifier=g}a.prototype.exec=function(g){var a,c,b;c=g.frames[0].variables;a=g.frames.slice(-1)[0].variables;if(this.identifier in
a)c=a;else if(!(this.identifier in c))if(g.auto_declare)c=a;else throw new l("Assignment to undefined variable: "+this.identifier);a=c[this.identifier];b=g.getStack().pop();g=g.getStack().pop();if(a.type!=="string")throw new l("Can only index YARNs, not "+a.type);if(b.type!=="int")throw new l("Can only index using NUMBRs, not "+b.type);if(b.value>=a.value.length)throw new l("Out of bounds: '"+a.value+"'["+b.value+"]");if(g.type!=="string"||g.value.length!==1)throw new l("Can only assign single-character YARNs to YARN indices, not "+
g.value);a=a.value;g=a.slice(0,b.value)+g.value+a.slice(b.value+1);return c[this.identifier]=new j("string",g)};return a}();B=function(){function a(){}a.prototype.exec=function(g){g.pause();return g.input()};return a}();K=function(){function a(){}a.prototype.exec=function(g){g.pause();return g.output(g.getStack().pop().value)};return a}();M=function(){function a(){}a.prototype.exec=function(g){var a;a=(a=g.syscall_result)?String(a):"";return g.getStack().push(new j("string",a))};return a}();N=function(){function a(g){this.identifier=
g}a.prototype.exec=function(a){var c,b;c=a.frames[0].variables;b=a.frames.slice(-1)[0].variables;if(this.identifier in b)c=b[this.identifier];else if(this.identifier in c)c=c[this.identifier];else throw new l("Reference to undefined variable: "+this.identifier);return a.getStack().push(c)};return a}();o=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();if(c.type!=="string")throw new l("Can only index YARNs, not "+c.type);if(b.type!=="int")throw new l("Can only index using NUMBRs, not "+
b.type);if(b.value>=c.value.length)throw new l("Out of bounds: '"+c.value+"'["+b.value+"]");return a.getStack().push(new j("string",c.value[b.value]))};return a}();L=function(){function a(g,c){this.type=g;this.value=c}a.prototype.exec=function(a){return a.getStack().push(new j(this.type,this.value))};return a}();r=function(){function a(g,c){this.type=g;this.explicit=c!=null?c:false}a.prototype.exec=function(a){return a.getStack().push(a.getStack().pop().cast(this.type,this.explicit))};return a}();
t=function(){function a(g,c){this.func_name=g;this.args_count=c}a.prototype.exec=function(a){var c,b,f;c=a.getStack();a.frames.push(new x(this.func_name,a.instruction_ptr));for(b=0,f=this.args_count;0<=f?b<f:b>f;0<=f?++b:--b)a.getStack().push(c.pop());return a.instruction_ptr=a.functions[this.func_name]};return a}();O=function(){function a(){}a.prototype.exec=function(a){var c,b;b=a.getStack().pop();c=a.frames.pop();a.instruction_ptr=c.instruction_ptr;return a.getStack().push(b)};return a}();v=function(){function a(g){this.args_count=
g}a.prototype.exec=function(a){var c,b,f,d,m;m=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)m.push(a.getStack().pop().cast("bool").value);b=true;for(f=0,d=m.length;f<d;f++)if(c=m[f],!c){b=false;break}return a.getStack().push(new j("bool",b))};return a}();w=function(){function a(c){this.args_count=c}a.prototype.exec=function(a){var c,b,f,d,m;m=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)m.push(a.getStack().pop().cast("bool").value);b=false;for(f=0,d=m.length;f<d;f++)if(c=m[f]){b=
true;break}return a.getStack().push(new j("bool",b))};return a}();i=function(){function a(c){this.args_count=c}a.prototype.exec=function(a){var c,b,f;f=[];for(c=0,b=this.args_count;0<=b?c<b:c>b;0<=b?++c:--c)f.push(a.getStack().pop().cast("string").value);return a.getStack().push(new j("string",f.join("")))};return a}();k=function(){function a(){}a.prototype.exec=function(a,c){var b,f,d;b=a.getStack().pop();f=a.getStack().pop();d="float"===b.type||"float"===f.type?"float":"int";b=b.cast(d).value;f=
f.cast(d).value;b=c(b,f);d==="int"&&(b=Math.floor(b));return a.getStack().push(new j(d,b))};return a}();e=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a+c})};return c}(k);P=function(a){function b(){return c=b.__super__.constructor.apply(this,arguments)}y(b,a);b.prototype.exec=function(a){return b.__super__.exec.call(this,a,function(a,c){return a-c})};return b}(k);q=function(a){function c(){return S=
c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a*c})};return c}(k);p=function(a){function c(){return T=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a/c})};return c}(k);I=function(a){function c(){return U=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,
a,function(a,c){return a%c})};return c}(k);G=function(a){function c(){return V=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a>c?a:c})};return c}(k);H=function(a){function c(){return W=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a<c?a:c})};return c}(k);s=function(){function a(){}a.prototype.exec=function(a,c){var b,
f;b=a.getStack().pop().cast("bool").value;f=a.getStack().pop().cast("bool").value;return a.getStack().push(new j("bool",c(b,f)))};return a}();k=function(a){function c(){return X=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a&&c})};return c}(s);J=function(a){function c(){return Y=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,
c){return a||c})};return c}(s);m=function(a){function c(){return Z=c.__super__.constructor.apply(this,arguments)}y(c,a);c.prototype.exec=function(a){return c.__super__.exec.call(this,a,function(a,c){return a^c})};return c}(s);s=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();return a.getStack().push(new j("bool",c.equal(b)))};return a}();R=function(){function a(){}a.prototype.exec=function(a){var c,b;c=a.getStack().pop();b=a.getStack().pop();
return a.getStack().push(new j("bool",!c.equal(b)))};return a}();z=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop().cast("bool").value;return a.getStack().push(new j("bool",!c))};return a}();A=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop();if(c.type!=="string")throw new l("Can only get length of YARNs");return a.getStack().push(new j("int",c.value.length))};return a}();E=function(){function a(){}a.prototype.exec=function(a){var c;c=
a.getStack().pop();if(c.type!=="int")throw new l("Character codes must be NUMBRs, not "+c.type);c=String.fromCharCode(c.value);return a.getStack().push(new j("string",c))};return a}();Q=function(){function a(){}a.prototype.exec=function(a){var c;c=a.getStack().pop();if(c.type!=="string"||!c.value.length)throw new l("Can only take character code of non-empty "+("YARNs, not '"+c.type+"'"));return a.getStack().push(new j("int",c.value.charCodeAt(0)))};return a}();this.LOLCoffee.Machine=function(){function a(c,
b,f,d,m,e){var S=this;this.context=c;this.input=b;this.output=f;this.error=d;this.done=m;this.auto_declare=e;this.instructions=this.context.instructions;this.labels=this.context.labels;this.reset();this.input=this.input||function(){return S.resume()};this.output=this.output||function(){return S.resume()};this.error=this.error||function(){};this.done=this.done||function(){};this.auto_declare=this.auto_declare||false}a.prototype.reset=function(){this.instruction_ptr=0;this.frames=[new x("{MAIN}",0)];
this.frames[0].variables.IT=new j("null",null);this.functions={};this.halted=true;this.blocked=false;return this.syscall_result=null};a.prototype.step=function(){if(this.blocked||this.halted||this.instruction_ptr>=this.instructions.length)throw new l("Cannot execute while blocked, halted or at end");try{return this.instructions[this.instruction_ptr++].exec(this)}catch(a){return this.error(a),this.halted=true}};a.prototype.run=function(){var a;this.halted=false;for(a=[];!this.blocked&&!this.halted;)a.push(this.step());
return a};a.prototype.pause=function(){return this.blocked=true};a.prototype.resume=function(a){a==null&&(a=null);this.syscall_result=a;this.blocked=false;if(!this.halted)return this.run()};a.prototype.getStack=function(){return this.frames[this.frames.length-1].stack};return a}();this.LOLCoffee.MachineError=l;this.LOLCoffee.Instructions={Halt:f,PushLiteral:L,DeclareFunction:d,Jump:F,DeclareVariable:h,Assign:u,AssignAtIndex:n,Return:O,Input:B,PushSyscallResult:M,Output:K,PushVariable:N,GetIndex:o,
Cast:r,JumpIfZero:C,Call:t,All:v,Any:w,Concat:i,Add:e,Subtract:P,Multiply:q,Divide:p,Modulo:I,Max:G,Min:H,And:k,Or:J,Xor:m,Equal:s,Unequal:R,Invert:z,GetLength:A,FromCharCode:E,ToCharCode:Q}}).call(this);
(function(){var e,v,k,w,u,n,s,t,r,i,a,d,h,p,x,E,o,A,f,B,z,F,C,l,G,H,I,q,J,K,L,M,N,O,P,Q,R={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var f in b)R.call(b,f)&&(a[f]=b[f]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};f=this.LOLCoffee.Instructions;t=function(a){function b(a){this.message=a}j(b,a);b.prototype.name="CodeGenError";return b}(Error);s=function(){function a(){this.instructions=[];this.labels=[];this._break_stack=[]}a.prototype.emit=
function(a){return this.instructions.push(a)};a.prototype.newLabel=function(){this.labels.push(null);return this.labels.length-1};a.prototype.emitLabel=function(a){if(a>=this.labels.length)throw new t("Unknown label ("+a+"). Top: "+this.labels.length);return this.labels[a]=this.instructions.length};a.prototype.getBreakLabel=function(){return this._break_stack[this._break_stack.length-1]};a.prototype.popBreakLabel=function(){return this._break_stack.pop()};a.prototype.pushBreakLabel=function(a){return this._break_stack.push(a)};
return a}();C=function(){return function(){}}();H=function(a){function b(a){this.body=a}j(b,a);b.prototype.codegen=function(a){this.body.codegen(a);return a.emit(new f.Halt)};return b}(C);h=function(a){function b(a,b,f){this.name=a;this.args=b;this.body=f}j(b,a);b.prototype.codegen=function(a){var b,d,e,m,h;b=a.newLabel();d=a.newLabel();a.emit(new f.DeclareFunction(this.name,b));a.emit(new f.Jump(d));a.emitLabel(b);this.args.reverse();h=this.args;for(e=0,m=h.length;e<m;e++)b=h[e],a.emit(new f.DeclareVariable(b)),
a.emit(new f.Assign(b));this.body.codegen(a);return a.emitLabel(d)};return b}(C);q=function(a){function b(){return N=b.__super__.constructor.apply(this,arguments)}j(b,a);return b}(C);I=function(a){function b(a){this.value=a}j(b,a);b.prototype.codegen=function(a){this.value.codegen(a);return a.emit(new f.Return)};return b}(q);A=function(a){function b(a){this.identifier=a}j(b,a);b.prototype.codegen=function(a){a.emit(new f.Input);a.emit(new f.PushSyscallResult);return a.emit(new f.Assign(this.identifier))};
return b}(q);G=function(a){function b(a){this.expression=a}j(b,a);b.prototype.codegen=function(a){this.expression.codegen(a);return a.emit(new f.Output)};return b}(q);i=function(a){function b(a){this.identifier=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.DeclareVariable(this.identifier))};return b}(q);e=function(a){function b(a,b){this.identifier=a;this.value=b}j(b,a);b.prototype.codegen=function(a){this.value.codegen(a);return a.emit(new f.Assign(this.identifier))};return b}(q);
x=function(a){function b(a,b,f){this.identifier=a;this.index=b;this.value=f}j(b,a);b.prototype.codegen=function(a){this.value.codegen(a);this.index.codegen(a);return a.emit(new f.AssignAtIndex(this.identifier))};return b}(q);w=function(a){function b(){}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.Jump(a.getBreakLabel()))};return b}(q);J=function(a){function b(a){this.statements=a}j(b,a);b.prototype.codegen=function(a){var b,f,d,e,h;e=this.statements;h=[];for(f=0,d=e.length;f<d;f++)b=
e[f],h.push(b.codegen(a));return h};return b}(q);r=function(a){function b(a,b){this.then_body=a;this.else_body=b}j(b,a);b.prototype.codegen=function(a){var b,d;b=a.newLabel();d=a.newLabel();a.emit(new f.PushVariable("IT"));a.emit(new f.Cast("bool"));a.emit(new f.JumpIfZero(b));this.then_body.codegen(a);a.emit(new f.Jump(d));a.emitLabel(b);this.else_body&&this.else_body.codegen(a);return a.emitLabel(d)};return b}(q);L=function(a){function b(a,b){this.cases=a;this.default_case=b}j(b,a);b.prototype.codegen=
function(a){var b,d,e,h,j,m,i,B,p;m=this.cases;for(j=0,e=m.length;j<e;j++)d=m[j],d.push(a.newLabel());this.default_case&&(h=a.newLabel());d=a.newLabel();B=this.cases;for(m=0,i=B.length;m<i;m++)b=B[m],e=b[0],j=b[2],e.codegen(a),a.emit(new f.PushVariable("IT")),a.emit(new f.Unequal),a.emit(new f.JumpIfZero(j));this.default_case&&a.emit(new f.Jump(h));a.pushBreakLabel(d);i=this.cases;for(e=0,m=i.length;e<m;e++)p=i[e],b=p[1],j=p[2],a.emitLabel(j),b.codegen(a);this.default_case&&(a.emitLabel(h),this.default_case.codegen(a));
a.popBreakLabel();return a.emitLabel(d)};return b}(q);F=function(a){function b(a,b,f){this.step=a;this.condition=b;this.body=f}j(b,a);b.prototype.codegen=function(a){var b,d;d=a.newLabel();b=a.newLabel();a.emitLabel(d);this.condition&&(this.condition.codegen(a),a.emit(new f.Cast("bool")),a.emit(new f.JumpIfZero(b)));this.body.codegen(a);this.step&&this.step.codegen(a);a.emit(new f.Jump(d));return a.emitLabel(b)};return b}(q);a=function(a){function b(){return O=b.__super__.constructor.apply(this,arguments)}
j(b,a);return b}(C);u=function(a){function b(a,b){this.func_name=a;this.args=b}j(b,a);b.prototype.codegen=function(a){var b,d,e,h;h=this.args;for(d=0,e=h.length;d<e;d++)b=h[d],b.codegen(a);return a.emit(new f.Call(this.func_name,this.args.length))};return b}(a);p=function(a){function b(a){this.identifier=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushVariable(this.identifier))};return b}(a);E=function(a){function b(a,b){this.base=a;this.index=b}j(b,a);b.prototype.codegen=function(a){this.index.codegen(a);
this.base.codegen(a);return a.emit(new f.GetIndex)};return b}(a);n=function(a){function b(a,b){this.expression=a;this.type=b}j(b,a);b.prototype.codegen=function(a){var b;this.expression.codegen(a);b=function(){switch(this.type){case "NOOB":return"null";case "TROOF":return"bool";case "NUMBR":return"int";case "NUMBAR":return"float";case "YARN":return"string"}}.call(this);return a.emit(new f.Cast(b,true))};return b}(a);o=function(a){function b(a,b){this.operator=a;this.operands=b}j(b,a);b.prototype.codegen=
function(a){var b,d,e,h;this.operands.reverse();h=this.operands;for(d=0,e=h.length;d<e;d++)b=h[d],b.codegen(a);b=function(){switch(this.operator){case "ALL OF":return new f.All(this.operands.length);case "ANY OF":return new f.Any(this.operands.length);case "SMOOSH":return new f.Concat(this.operands.length);default:throw new t("Unknown infinitary operator.");}}.call(this);return a.emit(b)};return b}(a);v=function(a){function b(a,b,f){this.operator=a;this.left=b;this.right=f}j(b,a);b.prototype.codegen=
function(a){var b;this.right.codegen(a);this.left.codegen(a);b=function(){switch(this.operator){case "SUM OF":return new f.Add;case "DIFF OF":return new f.Subtract;case "PRODUKT OF":return new f.Multiply;case "QUOSHUNT OF":return new f.Divide;case "MOD OF":return new f.Modulo;case "BIGGR OF":return new f.Max;case "SMALLR OF":return new f.Min;case "BOTH OF":return new f.And;case "EITHER OF":return new f.Or;case "WON OF":return new f.Xor;case "BOTH SAEM":return new f.Equal;case "DIFFRINT":return new f.Unequal;
default:throw new t("Unknown binary operator.");}}.call(this);return a.emit(b)};return b}(a);M=function(a){function b(a,b){this.operator=a;this.operand=b}j(b,a);b.prototype.codegen=function(a){var b;this.operand.codegen(a);b=function(){switch(this.operator){case "NOT":return new f.Invert;case "LENGZ OF":return new f.GetLength;case "CHARZ OF":return new f.FromCharCode;case "ORDZ OF":return new f.ToCharCode;default:throw new t("Unknown unary operator.");}}.call(this);return a.emit(b)};return b}(a);
z=function(a){function b(){return P=b.__super__.constructor.apply(this,arguments)}j(b,a);return b}(a);l=function(a){function b(){return Q=b.__super__.constructor.apply(this,arguments)}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushLiteral("null",null))};return b}(z);k=function(a){function b(a){this.value=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushLiteral("bool",this.value))};return b}(z);B=function(a){function b(a){this.value=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushLiteral("int",
this.value))};return b}(z);d=function(a){function b(a){this.value=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushLiteral("float",this.value))};return b}(z);K=function(a){function b(a){this.value=a}j(b,a);b.prototype.codegen=function(a){return a.emit(new f.PushLiteral("string",this.value))};return b}(z);this.LOLCoffee.CodeGenError=t;this.LOLCoffee.CodeGenContext=s;this.LOLCoffee.AST={Node:C,Program:H,Statement:q,FunctionDefinition:h,Declaration:i,Return:I,Input:A,Output:G,Assignment:e,
IndexedAssignment:x,Break:w,Loop:F,Conditional:r,Switch:L,StatementList:J,Expression:a,IdentifierExpression:p,IndexingExpression:E,CastExpression:n,CallExpression:u,UnaryExpression:M,BinaryExpression:v,InfinitaryExpression:o,Literal:z,NullLiteral:l,BoolLiteral:k,IntLiteral:B,FloatLiteral:d,StringLiteral:K}}).call(this);
(function(){var e,v,k,w,u,n,s={}.hasOwnProperty,t=function(e,a){function d(){this.constructor=e}for(var h in a)s.call(a,h)&&(e[h]=a[h]);d.prototype=a.prototype;e.prototype=new d;e.__super__=a.prototype;return e},r=[].indexOf||function(e){for(var a=0,d=this.length;a<d;a++)if(a in this&&this[a]===e)return a;return-1};e=this.LOLCoffee.AST;k=this.LOLCoffee.DEFAULT_VALUES;n=this.LOLCoffee.UNARY_OPERATORS;v=this.LOLCoffee.BINARY_OPERATORS;w=this.LOLCoffee.INFINITARY_OPERATORS;u=function(e){function a(a,
e){this.message="Line "+a+": "+e+"."}t(a,e);a.prototype.name="ParserError";return a}(Error);this.LOLCoffee.Parser=function(){function i(a,d){this.tokens=a;this.function_arities=d!=null?d:{};this._scope_depth=0;this._in_function=false}i.prototype.parseProgram=function(){var a;if(!this.tokens.length)return new e.Program(new e.StatementList([]));if(a=this._nextIs("keyword","HAI"))this._consume(),this._nextIs("endline")||this._consume("float","1.2"),this._consume();var d;for(d=[];this.tokens.length&&
!this._nextIs("keyword","KTHXBYE");)d.push(this.parseStatement());this._nextIs("keyword","KTHXBYE")&&(a||this._error("KTHXBYE is not allowed when HAI is not used"),this._consume("keyword","KTHXBYE"),this._consume("endline"));this.tokens.length!==0&&this._error("Unexpected input after program end");return new e.Program(new e.StatementList(d))};i.prototype.parseFunctionDefinition=function(){var a,d,h;this._consume("keyword","HOW DUZ I");h=this._consume("identifier");a=this.parseFunctionArgs();this._consume("endline");
this.function_arities[h]=a.length;this._in_function=true;for(d=[];!this._nextIs("keyword","IF U SAY SO");)d.push(this.parseStatement());d.push(new e.Return(new e.IdentifierExpression("IT")));d=new e.StatementList(d);this._in_function=false;this._consume("keyword","IF U SAY SO");return new e.FunctionDefinition(h,a,d)};i.prototype.parseFunctionArgs=function(){var a;for(a=[];this._nextIs("keyword","YR");)if(this._consume(),a.push(this._consume("identifier")),this._nextIs("keyword","AN"))this._consume();
else break;return a};i.prototype.parseStatement=function(){var a;this._nextIs("keyword","IM IN YR")?a=this.parseLoopStatement():this._nextIs("keyword","O RLY?")?a=this.parseConditionalStatement():this._nextIs("keyword","WTF?")?a=this.parseSwitchStatement():this._nextIs("keyword","I HAS A")?a=this.parseDeclaration():this._nextIs("keyword","GIMMEH")?a=this.parseInputStatement():this._nextIs("keyword","VISIBLE")?a=this.parseOutputStatement():this._nextIs("keyword","PUTZ")?a=this.parseIndexedAssignment():
this._nextIs("keyword","HOW DUZ I")?(this._in_function&&this._error("Cannot define nested functions"),a=this.parseFunctionDefinition()):this._nextIs("keyword","GTFO")?(this._scope_depth>0?a=new e.Break:this._in_function?a=new e.Return(new e.NullLiteral):this._error("GTFO must be inside a loop, switch, or function"),this._consume()):this._nextIs("keyword","FOUND YR")?(this._consume(),this._in_function||this._error("FOUND YR must be inside a function"),a=new e.Return(this.parseExpression())):a=this.tokens.length>=
2&&this._nextIs("identifier")&&this.tokens[1].is("keyword","R")?this.parseAssignment():this.tokens.length>=2&&this._nextIs("identifier")&&this.tokens[1].is("keyword","IS NOW A")?this.parseCastStatement():new e.Assignment("IT",this.parseExpression());this._consume("endline");return a};i.prototype.parseInputStatement=function(){this._consume("keyword","GIMMEH");return new e.Input(this._consume("identifier"))};i.prototype.parseDeclaration=function(){var a,d,h;this._consume("keyword","I HAS A");h=this._consume("identifier");
d=new e.Declaration(h);return this._nextIs("keyword","ITZ")?(this._consume(),this._nextIs("keyword","A")?(this._consume(),a=k[this.parseType()],a=new e.Assignment(h,a)):a=new e.Assignment(h,this.parseExpression()),new e.StatementList([d,a])):d};i.prototype.parseAssignment=function(){var a;a=this._consume("identifier");this._consume("keyword","R");return new e.Assignment(a,this.parseExpression())};i.prototype.parseIndexedAssignment=function(){var a,d,h;this._consume("keyword","PUTZ");h=this.parseExpression();
this._consume("keyword","INTA");a=this._consume("identifier");this._consume("keyword","AT");d=this.parseExpression();return new e.IndexedAssignment(a,d,h)};i.prototype.parseLoopStatement=function(){var a,d,h,p,i,k,o;this._consume("keyword","IM IN YR");h=this._consume("identifier");i=k=null;this._nextIs("endline")||(!this._nextIs("keyword","UPPIN")&&!this._nextIs("keyword","NERFIN")&&!this._nextIs("identifier")&&this._error("A loop operation must follow the loop label"),i=this._consume(),this._consume("keyword",
"YR"),k=this._consume("identifier"),o=new e.IdentifierExpression(k),a=function(){switch(i){case "UPPIN":return new e.BinaryExpression("SUM OF",o,new e.IntLiteral(1));case "NERFIN":return new e.BinaryExpression("DIFF OF",o,new e.IntLiteral(1));default:return this.function_arities[i]!==1&&this._error("Loop operation must be UPPIN, NERFIN or a unary function"),new e.CallExpression(i,[o])}}.call(this),i=new e.Assignment(k,a),this._nextIs("endline")||(this._nextIs("keyword","WILE")?d=false:this._nextIs("keyword",
"TIL")?d=true:this._error("A loop variable must be followed by WILE or TIL"),this._consume(),p=this.parseExpression(),d&&(p=new e.UnaryExpression("NOT",p))));this._consume("endline");this._scope_depth++;a=function(){var a;for(a=[];!this._nextIs("keyword","IM OUTTA YR");)a.push(this.parseStatement());return a}.call(this);a=new e.StatementList(a);this._scope_depth--;this._consume("keyword","IM OUTTA YR");h!==this._consume("identifier")&&this._error("Mismatched loop label");return new e.Loop(i,p,a)};
i.prototype.parseConditionalStatement=function(){var a,d,h,i,x,k,o,A=this;this._consume("keyword","O RLY?");this._consume("endline");this._consume("keyword","YA RLY");this._consume("endline");x=function(){return A._nextIs("keyword","MEBBE")||A._nextIs("keyword","NO WAI")||A._nextIs("keyword","OIC")};i=function(){var a;for(a=[];!x();)a.push(this.parseStatement());return a}.call(this);k=new e.StatementList(i);for(i=[];this._nextIs("keyword","MEBBE");)this._consume(),d=this.parseExpression(),this._consume("endline"),
a=function(){var a;for(a=[];!x();)a.push(this.parseStatement());return a}.call(this),i.push([d,new e.StatementList(a)]);d=[];a=null;this._nextIs("keyword","OIC")||(this._consume("keyword","NO WAI"),this._consume("endline"),(d=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this))&&(a=new e.StatementList(d)));for(this._consume("keyword","OIC");i.length;)o=i.pop(),d=o[0],h=o[1],d=new e.Assignment("IT",d),a=new e.Conditional(h,a),a=new e.StatementList([d,
a]);return new e.Conditional(k,a)};i.prototype.parseSwitchStatement=function(){var a,d,h,i;this._consume("keyword","WTF?");this._consume("endline");d=[];h=null;for(this._scope_depth++;!this._nextIs("keyword","OIC");)this._nextIs("keyword","OMG")?(this._consume(),a=this.tokens[0].line,i=this.parseLiteral(),i instanceof e.Literal||this._error("OMG value must be a literal",a),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OMG")&&!this._nextIs("keyword","OMGWTF")&&!this._nextIs("keyword",
"OIC");)a.push(this.parseStatement());return a}.call(this),d.push([i,new e.StatementList(a)])):this._nextIs("keyword","OMGWTF")?(this._consume(),this._consume("endline"),a=function(){var a;for(a=[];!this._nextIs("keyword","OIC");)a.push(this.parseStatement());return a}.call(this),h=new e.StatementList(a)):this._error("Expected OMG, OMGWTF or OIC");this._consume();this._scope_depth--;return new e.Switch(d,h)};i.prototype.parseExpression=function(){var a;return this._nextIs("keyword")?(a=this.tokens[0].text,
a==="MAEK"?this.parseCastExpression():r.call(n,a)>=0?this.parseUnaryExpression():r.call(v,a)>=0?this.parseBinaryExpression():r.call(w,a)>=0?this.parseInfinitaryExpression():a==="WIN"||a==="FAIL"||a==="NOOB"?this.parseLiteral():this._error("Invalid keyword at start of expression")):this._nextIs("identifier")?(a=this.tokens[0].text in this.function_arities?this.parseFunctionCall():new e.IdentifierExpression(this._consume()),this._nextIs("keyword","AT")?(this._consume(),new e.IndexingExpression(a,this.parseExpression())):
a):this.parseLiteral()};i.prototype.parseCastExpression=function(){var a;this._consume("keyword","MAEK");a=this.parseExpression();this._nextIs("keyword","A")&&this._consume();return new e.CastExpression(a,this.parseType())};i.prototype.parseCastStatement=function(){var a,d;d=this._consume("identifier");a=new e.IdentifierExpression(d);this._consume("keyword","IS NOW A");a=new e.CastExpression(a,this.parseType());return new e.Assignment(d,a)};i.prototype.parseType=function(){var a;a=this._consume("keyword");
a in k||this._error("Unknown type");return a};i.prototype.parseLiteral=function(){var a;return this._nextIs("string")?this._createStringLiteral(this._consume()):this._nextIs("int")?new e.IntLiteral(parseInt(this._consume(),10)):this._nextIs("float")?new e.FloatLiteral(parseFloat(this._consume())):this._nextIs("keyword")?(a=this._consume(),a==="WIN"||a==="FAIL"?new e.BoolLiteral(a==="WIN"):a==="NOOB"?new e.NullLiteral:this._error("Unexpected keyword while parsing literal",a.line)):this._error("Could not parse literal")};
i.prototype.parseFunctionCall=function(){var a;a=this._consume("identifier");a in this.function_arities||this._error("Undefined function: "+a);var d,h,i;i=[];for(d=0,h=this.function_arities[a];0<=h?d<h:d>h;0<=h?++d:--d)i.push(this.parseExpression());return new e.CallExpression(a,i)};i.prototype.parseOutputStatement=function(){this._consume("keyword","VISIBLE");var a;for(a=[];!this._nextIs("keyword","!")&&!this._nextIs("endline");)a.push(this.parseExpression());this._nextIs("keyword","!")?this._consume():
a.push(new e.StringLiteral("\n"));return new e.Output(new e.InfinitaryExpression("SMOOSH",a))};i.prototype.parseUnaryExpression=function(){var a;a=this._consume("keyword");r.call(n,a)<0&&this._error("Unknown unary operator: "+a);return new e.UnaryExpression(a,this.parseExpression())};i.prototype.parseBinaryExpression=function(){var a,d,h;d=this._consume("keyword");r.call(v,d)<0&&this._error("Unknown binary operator: "+d);a=this.parseExpression();this._nextIs("keyword","AN")&&this._consume();h=this.parseExpression();
return new e.BinaryExpression(d,a,h)};i.prototype.parseInfinitaryExpression=function(){var a;a=this._consume("keyword");r.call(w,a)<0&&this._error("Unknown infinitary operator: "+a);var d;for(d=[];!this._nextIs("keyword","MKAY")&&!this._nextIs("endline");)this._nextIs("keyword","AN")&&this._consume(),d.push(this.parseExpression());this._nextIs("keyword","MKAY")&&this._consume();return new e.InfinitaryExpression(a,d)};i.prototype._createStringLiteral=function(a){var d,h,i,k,n,o;/^".*"$/.test(a)||this._error("Invalid string literal: "+
a);a=a.slice(1,-1);k=[];d=[];for(i=n=0,o=a.length;n<o;i=++n)if(h=a[i],h===":")switch(h=a[++i],h){case ")":d.push("\n");break;case ">":d.push("\t");break;case "o":d.push("g");break;case '"':d.push('"');break;case ":":d.push(":");break;case "(":h=a.slice(i).match(/\(([\da-fA-F]+)\)/);d.push(String.fromCharCode(parseInt(h[1],16)));break;case "{":h=a.slice(i).match(/\{([a-zA-Z]\w*)\}/);d.length&&k.push(new e.StringLiteral(d.join("")));k.push(new e.IdentifierExpression(h[1]));d=[];break;case "[":this._error("Unicode name embedding not implemented yet: "+
a)}else d.push(h);return k.length?(d.length&&k.push(new e.StringLiteral(d.join(""))),new e.InfinitaryExpression("SMOOSH",k)):new e.StringLiteral(d.join(""))};i.prototype._consume=function(a,d){var e,i;if(!(a!=null||d!=null))return this.tokens.shift().text;if(this._nextIs(a,d))return this._consume();else throw this.tokens.length===0?(i="(last)",e="(end of input)"):(i=this.tokens[0].line,e=""+this.tokens[0].type+"("+this.tokens[0].text+")"),new u(i,"Expected: "+(d!=null?""+a+"('"+(d||"")+"')":a)+"; Got: "+
e);};i.prototype._nextIs=function(a,d){return this.tokens.length&&this.tokens[0].is(a,d)};i.prototype._error=function(a,d){d?a+=", near "+this.tokens[0].type+":'"+this.tokens[0].text+"'":d=this.tokens.length?this.tokens[0].line:d="(last)";throw new u(d,a);};return i}();this.LOLCoffee.ParserError=u}).call(this);
(function(){var e,v,k,w,u,n,s,t,r,i,a,d,h,p,x={}.hasOwnProperty,E=function(a,d){function e(){this.constructor=a}for(var i in d)x.call(d,i)&&(a[i]=d[i]);e.prototype=d.prototype;a.prototype=new e;a.__super__=d.prototype;return a},o=[].indexOf||function(a){for(var d=0,e=this.length;d<e;d++)if(d in this&&this[d]===a)return d;return-1};n=this.LOLCoffee.KEYWORDS;u=/^-?\d+/;v=/^-?(\d+\.\d*|\.\d+)/;k=/^[a-zA-Z]\w*/;r=/^OBTW\b[^]*?\bTLDR\b/;e=/^BTW\b.*/;t=/^(\u2026|\.\.\.)[ \t\v]*(\r\n|\r|\n)/;i=/^(\r\n|\r|\n|,)/;
w=/^[ \t\v]+/;a=/^"(?::(?:[)>o":]|\([\dA-Fa-f]+\)|\{[A-Za-z]\w*\}|\[[^\[\]]+\])|[^":])*"/;n=function(){var a,d,e;e=[];for(a=0,d=n.length;a<d;a++)p=n[a],e.push(p.replace(/\?/g,"\\?").replace(/\s/g,"[ \\t\\v]+"));return e}();s=RegExp("^("+n.join("|")+")(?=$|\\b|\\W)");h=function(a){function d(a,e){this.message="Line "+a+": "+e+"."}E(d,a);d.prototype.name="TokenizerError";return d}(Error);d=function(){function a(d,e,i){this.line=d;this.type=e;this.text=i!=null?i:"";if(o.call(a.prototype.TYPES,e)<0)throw new h(d,
"Invalid token type: "+e);}a.prototype.is=function(a,d){return this.type===a&&(d===void 0||this.text===d)};a.prototype.TYPES="endline,keyword,identifier,int,float,string".split(",");return a}();this.LOLCoffee.Tokenizer=function(){function n(a){this.text=a;this.tokens=[];this.line=[];this.line_index=1}n.prototype.tokenize=function(){for(var d,h;this.text;){if(!(h=this.text.match(w)))if(h=this.text.match(t))i.test(this.text.slice(h[0].length))&&this._error("Cannot have an empty line after line continuation");
else if(h=this.text.match(i))this._flushLine();else if(!(h=this.text.match(e)))(h=this.text.match(r))?this.line.length&&this._error("Multiline comments must start on a new line"):(h=this.text.match(s))?this._emit("keyword",h[0].replace(/\s+/g," ")):(h=this.text.match(k))?this._emit("identifier",h[0]):(h=this.text.match(v))?this._emit("float",h[0]):(h=this.text.match(u))?this._emit("int",h[0]):(h=this.text.match(a))?this._emit("string",h[0]):(d=this.text.match(/^.*/)[0],this._error("Unrecognized sequence at: "+
d));(d=h[0].match(/\r\n|\r|\n/g))&&(this.line_index+=d.length);this.text=this.text.slice(h[0].length)}this._flushLine();return this.tokens};n.prototype._flushLine=function(){if(this.line.length)this.tokens=this.tokens.concat(this.line),this.tokens.push(new d(this.line_index,"endline"));return this.line=[]};n.prototype._emit=function(a,e){return this.line.push(new d(this.line_index,a,e))};n.prototype._error=function(a){throw new h(this.line_index,a);};return n}();this.LOLCoffee.TokenizerError=h}).call(this);
